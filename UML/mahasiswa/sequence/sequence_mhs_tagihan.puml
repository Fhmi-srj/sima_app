@startuml Sequence Diagram - Melihat Tagihan Mahasiswa

title Sequence Diagram: Melihat Tagihan Mahasiswa

actor Mahasiswa as mhs
participant "Halaman Keuangan" as page
participant "Finance Controller" as ctrl
database "Database" as db

mhs -> page : Pilih menu Keuangan
activate page

page -> ctrl : getBillingSummary(nim)
activate ctrl
ctrl -> db : SELECT bills, payments WHERE nim = ?
activate db
db --> ctrl : Bills & payments data
deactivate db
ctrl --> page : Financial summary
deactivate ctrl

page --> mhs : Tampilkan ringkasan\n(Total, Dibayar, Sisa)

page --> mhs : Tampilkan filter status

mhs -> page : Pilih filter (Semua/Lunas/Belum)
page -> ctrl : filterBills(status)
activate ctrl
ctrl --> page : Filtered bills
deactivate ctrl

page --> mhs : Tampilkan daftar tagihan

mhs -> page : Tap kartu tagihan
page -> ctrl : getBillDetail(bill_id)
activate ctrl
ctrl -> db : SELECT bill_detail WHERE id = ?
activate db
db --> ctrl : Bill detail
deactivate db
ctrl --> page : Detail data
deactivate ctrl

page --> mhs : Tampilkan modal detail\n(Nomor, Jenis, Nominal, Jatuh Tempo)

alt Status = Belum Lunas
    page --> mhs : Tampilkan tombol "Bayar Sekarang"
    
    opt Bayar
        mhs -> page : Tap "Bayar Sekarang"
        page --> mhs : Navigasi ke halaman pembayaran
    end
    
else Status = Lunas
    page --> mhs : Tampilkan info pembayaran\n(Tanggal, Metode, Referensi)
end

mhs -> page : Tutup modal
deactivate page

@enduml
